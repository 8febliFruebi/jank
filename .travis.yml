language: cpp
compiler:
  - gcc
  - clang

sudo: false

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
      - llvm-toolchain-precise-3.6
    packages:
      - g++-5
      - gcc-5
      - clang-3.6
      - libboost-system1.55-dev
      - libboost-regex1.55-dev

before_install:
  - if [[ "$CXX" == "clang++" ]]; then
      export CXX=clang++-3.6; export CC=clang-3.6;
    fi
  - if [[ "$CXX" == "g++" ]]; then
      export CXX=g++-5; export CC=gcc-5;
    fi

script:
  # Release build
  - mkdir build_release ; cd build_release
  - cmake .. -DCMAKE_BUILD_TYPE=RELEASE
  - make -j2 && make jank_test
  - cd ..
  # Debug build
  - mkdir build_debug ; cd build_debug
  - cmake .. -DCMAKE_BUILD_TYPE=DEBUG
  - make -j2 && make jank_test

notifications:
  email:
    on_success: change
    on_failure: always
  irc:
    channels:
      - "chat.freenode.net#jank"
    on_success: always
    on_failure: always
    use_notice: true
